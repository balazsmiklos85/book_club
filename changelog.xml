<changeset id="0.1.0" author="Miklós Balázs" date="2023-08-19">
  <createTable tableName="users">
    <column name="id" type="uuid" notNull="true" primaryKey="true" />
    <column name="name" type="varchar(255)" notNull="true" />
    <column name="is_admin" type="boolean" notNull="true" />
    <column name="external_id" type="int" notNull="true" unique="true" />
  </createTable>
  <createTable tableName="user_passwords">
    <column name="id" type="int" notNull="true" autoIncrement="true"/>
    <column name="password_hash" type="varchar(255)" notNull="true"/>
    <column name="salt" type="varchar(255)" notNull="true"/>
    <column name="hash_algorithm" type="varchar(255)" notNull="true"/>
    <column name="user_id" type="int" notNull="true"/>
    <primaryKey columnNames="id"/>
    <foreignKey columnNames="user_id" referencedTable="users" referencedColumnNames="id"/>
  </createTable>
  <createTable tableName="emails">
    <column name="email_address" type="varchar(255)" notNull="true"/>
    <column name="user_id" type="int" notNull="true"/>
    <primaryKey columnNames="email_address"/>
    <foreignKey columnNames="user_id" referencedTable="users" referencedColumnNames="id"/>
  </createTable>
</changeset>